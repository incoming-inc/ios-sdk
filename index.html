<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Incoming PVN iOS SDK : Incoming Push Notification SDK for iOS">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Incoming PVN iOS SDK</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/incoming-inc/ios-template-app">View on GitHub</a>

          <h1 id="project_title">Incoming PVN iOS SDK</h1>
          <h2 id="project_tagline">Incoming Push Notification SDK for iOS</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/incoming-inc/ios-template-app/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/incoming-inc/ios-template-app/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>The Incoming Push Video SDK can be used in a <a href="##Creating-a-new-Project">new project</a> by cloning the simple template application,  or can be <a href="##Adding-the-Push-Video-Notification-SDK%20to%20an%20existing%20Project">added to an existing application</a> by dropping the SDK distribution folder into your project, and adding a small amount of code.</p>

<h2>
<a id="creating-a-new-project" class="anchor" href="#creating-a-new-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a new Project</h2>

<p>We provide a template application to make the SDK integration easy in a new project. </p>

<h3>
<a id="clone-the-template-application" class="anchor" href="#clone-the-template-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clone the Template Application</h3>

<p>Clone the iOS template application at <a href="https://github.com/incoming-inc/ios-template-app">https://github.com/incoming-inc/ios-template-app</a>.
The Push Video template application PVNTemplate.xcodeproj, it can be opened width Xcode 6.</p>

<h3>
<a id="import-the-ios-sdk-zip" class="anchor" href="#import-the-ios-sdk-zip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import the iOS SDK zip</h3>

<p>The PVN SDK distribution zip can be downloaded from your project in the Incoming control panel. 
The distribution zip file contains a directory named incoming-ios-sdk, which itself contains:</p>

<ul>
<li>the Incoming SDK static library</li>
<li>header files </li>
<li>resources that are required by a host application.</li>
</ul>

<p>Drag and drop the incoming-ios-sdk onto your XCode project. Tick "Copy items if needed". </p>

<h3>
<a id="create-or-edit-the-incoming-sdk-configuration-file" class="anchor" href="#create-or-edit-the-incoming-sdk-configuration-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create or Edit the Incoming SDK Configuration File</h3>

<p>The SDK relies on a configuration file named "incoming-ios-sdk.plist" which must be in you app main's target "Copy Bundle Resources" Build Phase. </p>

<p>If you downloaded the SDK distribution zip file from your project in the Incoming Push Video control panel, the archive may contains this file. In this case, go to the next step. To create the file, right click on the incoming­-ios-­sdk folder in the xcode explorer, and choose “New File” / “Resource” / “Property List”, name it incoming-ios-sdk.</p>

<p>​This file must contains at minimum the following keys</p>

<ul>
<li>api_endpoint: the Incoming API endpoint to connect to</li>
<li>project_key: your Incoming PVN project key
You will find both these values in the control panel, by going to the “App” page, in the top­left section titled “Download the push video SDK for iOS”.</li>
</ul>

<h2>
<a id="adding-the-push-video-notification-sdk-to-an-existing-project" class="anchor" href="#adding-the-push-video-notification-sdk-to-an-existing-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding the Push Video Notification SDK to an existing Project</h2>

<p>Adding the PVN SDK to an existing project consist of the following steps. </p>

<h3>
<a id="import-the-push-video-sdk-distribution-folder" class="anchor" href="#import-the-push-video-sdk-distribution-folder" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import the Push Video SDK distribution folder</h3>

<p>C.f. <a href="##Import-the-iOS-SDK-zip">above</a> </p>

<h3>
<a id="create-or-edit-the-incoming-ios-sdkplist" class="anchor" href="#create-or-edit-the-incoming-ios-sdkplist" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create or edit the incoming-ios-sdk.plist</h3>

<p>C.f. <a href="##Create-or-Edit-the-Incoming-SDK-Configuration-File">above</a></p>

<h3>
<a id="add-framework-dependencies-to-your-project-linked-framework-list" class="anchor" href="#add-framework-dependencies-to-your-project-linked-framework-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add framework dependencies to your project Linked framework list</h3>

<p>Go into your app’s target’s Build Phases screen and add the following frameworks to the “Link Binary With Libraries” section.</p>

<ul>
<li>AVFoundation.framework</li>
<li>MediaPlayer.framework</li>
<li>SystemConfiguration.framework</li>
<li>CoreMotion.framework</li>
<li>CoreTelephony.framework</li>
<li>CoreData.framework</li>
<li>CoreMedia.framework</li>
<li>MediaPlayer.framework</li>
<li>MobileCoreServices.framework</li>
<li>SystemConfiguration.framework</li>
<li>Foundation.framework</li>
<li>CoreImage.framework</li>
<li>Accelerate.framework</li>
<li>UIKit.framework</li>
<li>libz.dylib</li>
<li>NotificationCenter.framework (status can be set to “Optional” if you want to support
iOS7</li>
</ul>

<h3>
<a id="configure-background-modes" class="anchor" href="#configure-background-modes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure Background Modes</h3>

<p>Using XCode, configure the application background modes:</p>

<ul>
<li>click on your app target, then select ‘Capabilities’.</li>
<li>Turn on “Background Modes”,</li>
<li>In Background Modes, enable “Background fetch” and “Remote Notification</li>
</ul>

<p>In your app ‘Info’ pane, add the location data purpose, by setting NSLocationAlwaysUsageDescription and NSLocationWhenInUsageDescription to e.g. “To compute the best place and time to send you content updates”</p>

<h3>
<a id="set-linker-flags" class="anchor" href="#set-linker-flags" aria-hidden="true"><span class="octicon octicon-link"></span></a>Set linker flags</h3>

<p>Enable a linker flag that allows the use of categories in the Incoming SDK static library. Start by choosing the main target for your app, selecting the “Build Settings” tab, and then search for “other linker”. Under “Other Linker Flags”, add the “­ObjC”.</p>

<h3>
<a id="add-a-few-lines-of-code-to-your-application-delegate" class="anchor" href="#add-a-few-lines-of-code-to-your-application-delegate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add a few lines of code to your application delegate.</h3>

<p>The host application delegate must to forward several calls from the operating system to the SDK. These are all implemented in the template application and can be conveniently copied from there. Take a look into the sample application’s delegate code.
<a href="https://github.com/incoming-inc/ios-template-app/blob/master/PVNTemplate/PVTAppDelegate.m">https://github.com/incoming-inc/ios-template-app/blob/master/PVNTemplate/PVTAppDelegate.m</a></p>

<p>The minimum code to add to your application delegate is: </p>

<div class="highlight highlight-objective-c"><pre>
#<span class="pl-k">import</span> <span class="pl-s1"><span class="pl-pds">"</span>ISDKAppDelegateHelper.h<span class="pl-pds">"</span></span>
...


- (<span class="pl-st">BOOL</span>)application:(UIApplication *)application didFinishLaunchingWithOptions:(<span class="pl-s3">NSDictionary</span> *)launchOptions
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>[UIApplication <span class="pl-s3">sharedApplication</span>] <span class="pl-s3">didFinishLaunchingWithOptions:</span>launchOptions];

    [ISDKAppDelegateHelper <span class="pl-s3">registerForNotifications</span>];
    <span class="pl-c">/* perform your own initialization here */</span>

    <span class="pl-k">return</span> <span class="pl-c1">YES</span>;
}

- (<span class="pl-st">BOOL</span>)application:(UIApplication *)application openURL:(<span class="pl-s3">NSURL</span> *)url sourceApplication:(<span class="pl-s3">NSString</span> *)sourceApplication annotation:(<span class="pl-st">id</span>)annotation
{
    [ISDKAppDelegateHelper <span class="pl-s3">handleOpenURL:</span>url <span class="pl-s3">sourceApplication:</span>sourceApplication <span class="pl-s3">annotation:</span>annotation];
    <span class="pl-c">/* perform your handling here */</span>
    <span class="pl-k">return</span> <span class="pl-c1">YES</span>;
}

- (<span class="pl-st">void</span>) application:(UIApplication *)application performFetchWithCompletionHandler:(<span class="pl-st">void</span> (^)(UIBackgroundFetchResult))completionHandler{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">performFetchWithCompletionHandler:</span>completionHandler];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application handleEventsForBackgroundURLSession:(<span class="pl-s3">NSString</span> *)identifier completionHandler:(<span class="pl-st">void</span> (^)())completionHandler
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">handleEventsForBackgroundURLSession:</span>identifier <span class="pl-s3">completionHandler:</span>completionHandler];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="pl-s3">NSData</span> *)deviceToken
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didRegisterForRemoteNotificationsWithDeviceToken:</span>deviceToken];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(<span class="pl-s3">NSError</span> *)error
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didFailToRegisterForRemoteNotificationsWithError:</span>error];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didReceiveRemoteNotification:(<span class="pl-s3">NSDictionary</span> *)userInfo
fetchCompletionHandler:(<span class="pl-st">void</span> (^)(UIBackgroundFetchResult))completionHandler
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didReceiveRemoteNotification:</span>userInfo <span class="pl-s3">fetchCompletionHandler:</span>completionHandler];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didReceiveRemoteNotification:(<span class="pl-s3">NSDictionary</span> *)userInfo
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didReceiveRemoteNotification:</span>userInfo];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didReceiveLocalNotification:</span>notification];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application handleActionWithIdentifier:(<span class="pl-s3">NSString</span> *)identifier forLocalNotification:(UILocalNotification *)userInfo completionHandler:(<span class="pl-st">void</span> (^)())completionHandler {
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">handleActionWithIdentifier:</span>identifier <span class="pl-s3">forLocalNotification:</span>userInfo <span class="pl-s3">completionHandler:</span>completionHandler];
}

- (<span class="pl-st">void</span>)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings
{
    [ISDKAppDelegateHelper <span class="pl-s3">application:</span>application <span class="pl-s3">didRegisterUserNotificationSettings:</span>notificationSettings];
}
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Incoming PVN iOS SDK maintained by <a href="https://github.com/incoming-inc">incoming-inc</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
